# r.sim.sediment

**Category**: raster

## Description

Sediment transport and erosion/deposition simulation using path sampling method (SIMWE).

---

## grass.tools API (Recommended for new code)

⚠️ **Status**: Experimental in GRASS 8.5, will be stable in 8.6

### Function Signature

```python
tools.r_sim_sediment(elevation,water_depth,dx,dy,detachment_coeff,transport_coeff,shear_stress,man=None,man_value=0.1,observation=None,transport_capacity=None,tlimit_erosion_deposition=None,sediment_concentration=None,sediment_flux=None,erosion_deposition=None,logfile=None,walkers_output=None,nwalkers=None,niterations=10,mintimestep=0.0,output_step=2,diffusion_coeff=0.8,random_seed=None,nprocs=1,flags=None,overwrite=None,verbose=None,quiet=None,superquiet=None)
```

### Parameters

1. **`elevation : str | np.ndarray, required`**
   - Name of input elevation raster map
   - Used as: input, raster, name

2. **`water_depth : str | np.ndarray, required`**
   - Name of water depth raster map [m]
   - Used as: input, raster, name

3. **`dx : str | np.ndarray, required`**
   - Name of x-derivatives raster map [m/m]
   - Used as: input, raster, name

4. **`dy : str | np.ndarray, required`**
   - Name of y-derivatives raster map [m/m]
   - Used as: input, raster, name

5. **`detachment_coeff : str | np.ndarray, required`**
   - Name of detachment capacity coefficient raster map [s/m]
   - Used as: input, raster, name

6. **`transport_coeff : str | np.ndarray, required`**
   - Name of transport capacity coefficient raster map [s]
   - Used as: input, raster, name

7. **`shear_stress : str | np.ndarray, required`**
   - Name of critical shear stress raster map [Pa]
   - Used as: input, raster, name

8. **`man : str | np.ndarray, optional`**
   - Name of Manning's n raster map
   - Used as: input, raster, name

9. **`man_value : float, optional`**
   - Manning's n unique value
   - Default: 0.1

10. **`observation : str, optional`**
   - Name of sampling locations vector points map
   - Or data source for direct OGR access
   - Used as: input, vector, name

11. **`transport_capacity : str | type(np.ndarray) | type(np.array) | type(gs.array.array), optional`**
   - Name for output transport capacity raster map [kg/ms]
   - Used as: output, raster, name

12. **`tlimit_erosion_deposition : str | type(np.ndarray) | type(np.array) | type(gs.array.array), optional`**
   - Name for output transport limited erosion-deposition raster map [kg/m2s]
   - Used as: output, raster, name

13. **`sediment_concentration : str | type(np.ndarray) | type(np.array) | type(gs.array.array), optional`**
   - Name for output sediment concentration raster map [particle/m3]
   - Used as: output, raster, name

14. **`sediment_flux : str | type(np.ndarray) | type(np.array) | type(gs.array.array), optional`**
   - Name for output sediment flux raster map [kg/ms]
   - Used as: output, raster, name

15. **`erosion_deposition : str | type(np.ndarray) | type(np.array) | type(gs.array.array), optional`**
   - Name for output erosion-deposition raster map [kg/m2s]
   - Used as: output, raster, name

16. **`logfile : str, optional`**
   - Name for sampling points output text file. For each observation vector point the time series of sediment transport is stored.
   - Used as: output, file, name

17. **`walkers_output : str, optional`**
   - Base name of the output walkers vector points map
   - Used as: output, vector, name

18. **`nwalkers : int, optional`**
   - Number of walkers

19. **`niterations : int, optional`**
   - Time used for iterations [minutes]
   - Default: 10

20. **`mintimestep : float, optional`**
   - Minimum time step for the simulation [seconds]
   - A larger minimum time step substantially reduces processing time, but at the cost of accuracy
   - Default: 0.0

21. **`output_step : int, optional`**
   - Time interval for creating output maps [minutes]
   - Default: 2

22. **`diffusion_coeff : float, optional`**
   - Water diffusion constant
   - Default: 0.8

23. **`random_seed : int, optional`**
   - Seed for random number generator
   - The same seed can be used to obtain same results or random seed can be generated by other means.

24. **`nprocs : int, optional`**
   - Number of threads which will be used for parallel computation.
   - Default: 1

25. **`flags : str, optional`**
   - Allowed values: s
   - s
   - Generate random seed

26. **`overwrite : bool, optional`**
   - Allow output files to overwrite existing files
   - Default: None

27. **`verbose : bool, optional`**
   - Verbose module output
   - Default: None

28. **`quiet : bool, optional`**
   - Quiet module output
   - Default: None

29. **`superquiet : bool, optional`**
   - Very quiet module output
   - Default: None


*Showing 10 of 29 parameters - see [full documentation](https://grass.osgeo.org/grass-devel/manuals/r.sim.sediment.html#__tabbed_2_3) for all*

### Returns

result : grass.tools.support.ToolResult | np.ndarray | tuple[np.ndarray] | None
If the tool produces text as standard output, a ToolResult object will be returned. Otherwise, None will be returned. If an array type (e.g., np.ndarray) is used for one of the raster outputs, the result will be an array and will have the shape corresponding to the computational region. If an array type is used for more than one raster output, the result will be a tuple of arrays.

### Raises

grass.tools.ToolError: When the tool ended with an error.

---

---

## Detailed Description

r.sim.sediment is a landscape scale, simulation model of soil erosion,
sediment transport and deposition caused by flowing water designed for
spatially variable terrain, soil, cover and rainfall excess conditions.
The soil erosion model is based on the theory used in the USDA WEPP
hillslope erosion model, but it has been generalized to 2D flow. The
solution is based on the concept of duality between fields and particles
and the underlying equations are solved by Green's function Monte Carlo
method, to provide robustness necessary for spatially variable
conditions and high resolutions (Mitas and Mitasova 1998). Key inputs of
the model include the following raster maps: elevation ( elevation [m]), flow gradient given by the first-order partial derivatives of
elevation field ( dx and dy ), overland flow water depth
( water_depth [m]), detachment capacity coefficient
( detachment_coeff [s/m]), transport capacity coefficient
( transport_coeff [s]), critical shear stress ( shear_stress [Pa])
and surface roughness coefficient called Manning's n ( man raster map).
Partial derivatives can be computed by v.surf.rst or r.slope.aspect module. The data are automatically
converted from feet to metric system using database/projection
information, so the elevation always should be in meters. The water
depth file can be computed using r.sim.water module.
Other parameters must be determined using field measurements or
reference literature (see suggested values in Notes and References).

Output includes transport capacity raster map transport_capacity in
[kg/ms], transport capacity limited erosion/deposition raster map tlimit_erosion_deposition [kg/m^2s] that are output
almost immediately and can be viewed while the simulation continues.
Sediment flow rate raster map sediment_flux [kg/ms], and net
erosion/deposition raster map [kg/m^2s] can take longer time
depending on time step and simulation time. Simulation time is
controlled by niterations [minutes] parameter. If the resulting
erosion/deposition map is noisy, higher number of walkers, given by nwalkers should be used.

Increasing the number of threads with nprocs does not really speed
up the simulation.

---

## Authors

Helena Mitasova, Lubos Mitas North Carolina State University hmitaso@unity.ncsu.edu
Jaroslav Hofierka GeoModel, s.r.o. Bratislava, Slovakia
hofierka@geomodel.sk
Chris Thaxton North Carolina State University csthaxto@unity.ncsu.edu
csthaxto@unity.ncsu.edu

---

## Resources

- [Official r.sim.sediment manual](https://grass.osgeo.org/grass-devel/manuals/r.sim.sediment.html)
- [grass.tools API documentation](https://grass.osgeo.org/grass-devel/manuals/r.sim.sediment.html#__tabbed_1_3)
- [GRASS GIS Documentation](https://grass.osgeo.org/grass85/manuals/)

---

*Generated from GRASS GIS 8.5 documentation*
